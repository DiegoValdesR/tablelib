(function(f,g){typeof exports=="object"&&typeof module<"u"?module.exports=g():typeof define=="function"&&define.amd?define(g):(f=typeof globalThis<"u"?globalThis:f||self,f.TableLib=g())})(this,(function(){"use strict";const f={contains:({value:e,searchValue:t})=>!!e.toLowerCase().includes(t.toLowerCase()),equals:({value:e,searchValue:t})=>e.toLowerCase()===t.toLowerCase()},g=e=>{if(e.searchValue.length===0)return e.data;const t=e.data.filter(n=>{for(const o in n){const r=n[o]?n[o].toString():"";if(!f[e.action])return;if(f[e.action]({searchValue:e.searchValue,value:r}))return n}});return t.length>0?t:e.data},w=e=>{const t=e.table.querySelector("tbody")||document.createElement("tbody");t.innerHTML.length>0&&(t.innerHTML="");for(let n=e.offset;n<e.limit;n++){const o=e.data[n];if(!o)throw new Error(`The row ${n+1} does not have data attached to it`);const r=document.createElement("tr");e.columns.forEach((s,a)=>{if(!s.body&&!s.field)throw new Error(`The column number ${a+1} does not have data associated with it`);if(s.body&&s.field)throw new Error(`The column number ${a+1} can only have one type of data associated`);const i=document.createElement("td");if(s.field){const c=o[s.field]||"";i.innerText=c}if(s.body){const c=s.body(o);typeof c=="string"?i.innerHTML=c:i.appendChild(c)}i.innerHTML.length>30&&s.field&&(i.innerHTML=i.innerHTML.slice(0,30)+"..."),r.appendChild(i)}),t.appendChild(r)}return t},C=e=>{const t=e.tableContainer.querySelector(".tablelib-filters")||document.createElement("div");t.innerHTML.length>0?t.innerHTML="":t.classList.add("tablelib-filters");const n=e.data.slice(e.offset,e.limit),o=document.createElement("div");return o.classList.add("filters-container"),e.columns.forEach(r=>{if(r.body||!r.field)return;const s=document.createElement("div");s.classList.add("filter");const a=document.createElement("label");a.classList.add("filter-label"),a.innerText=r.header;const i=document.createElement("select");L({data:n,targetField:r.field,selectedValue:e.selectedValue}).forEach(l=>i.appendChild(l)),s.appendChild(a),s.appendChild(i),o.appendChild(s)}),t.appendChild(o),t},L=e=>{const t=[],n=[],o=document.createElement("option");return o.innerText="Select an option",o.value="",t.push(o),e.data.forEach(r=>{const s=r[e.targetField]?r[e.targetField].toString():void 0;if(s&&!n.some(a=>a===s)){const a=document.createElement("option");a.innerText=s.toUpperCase(),a.value=s,e.selectedValue&&e.selectedValue===s&&(a.selected=!0),a.innerHTML.length>30&&(a.innerHTML=a.innerHTML.slice(0,30)+"..."),t.push(a),n.push(s)}}),t},u={sortUp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M32 224c-12.9 0-24.6-7.8-29.6-19.8S.2 178.5 9.4 169.4l160-160c12.5-12.5 32.8-12.5 45.3 0l160 160c9.2 9.2 11.9 22.9 6.9 34.9S364.9 224 352 224L32 224z"/></svg>',sortDown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M32 288c-12.9 0-24.6 7.8-29.6 19.8S.2 333.5 9.4 342.6l160 160c12.5 12.5 32.8 12.5 45.3 0l160-160c9.2-9.2 11.9-22.9 6.9-34.9S364.9 288 352 288L32 288z"/></svg>',sortNormal:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M2.4 204.2c5 12 16.6 19.8 29.6 19.8l320 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-160-160c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-9.2 9.2-11.9 22.9-6.9 34.9zm0 103.5c-5 12-2.2 25.7 6.9 34.9l160 160c12.5 12.5 32.8 12.5 45.3 0l160-160c9.2-9.2 11.9-22.9 6.9-34.9S364.9 288 352 288L32 288c-12.9 0-24.6 7.8-29.6 19.8z"/></svg>',first:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L269.3 256 406.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg>',last:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M439.1 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L371.2 256 233.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L179.2 256 41.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/></svg>',clearFilters:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M64 128C51.1 128 39.4 135.8 34.4 147.8C29.4 159.8 32.2 173.5 41.4 182.6L224 365.3L224 480C224 488.5 227.4 496.6 233.4 502.6L297.4 566.6C299.9 569.1 302.7 571.1 305.7 572.6C284.5 541.7 272.1 504.3 272.1 464C272.1 364.6 347.6 282.9 444.4 273L534.8 182.6C544 173.4 546.7 159.7 541.7 147.7C536.7 135.7 524.9 128 512 128L64 128zM464 608C543.5 608 608 543.5 608 464C608 384.5 543.5 320 464 320C384.5 320 320 384.5 320 464C320 543.5 384.5 608 464 608zM523.3 427.3L486.6 464L523.3 500.7C529.5 506.9 529.5 517.1 523.3 523.3C517.1 529.5 506.9 529.5 500.7 523.3L464 486.6L427.3 523.3C421.1 529.5 410.9 529.5 404.7 523.3C398.5 517.1 398.5 506.9 404.7 500.7L441.4 464L404.7 427.3C398.5 421.1 398.5 410.9 404.7 404.7C410.9 398.5 421.1 398.5 427.3 404.7L464 441.4L500.7 404.7C506.9 398.5 517.1 398.5 523.3 404.7C529.5 410.9 529.5 421.1 523.3 427.3z"/></svg>'},v=e=>{const t=document.createElement("div");t.classList.add("tablelib-pagination");const n=document.createElement("div");n.classList.add("tablelib-pages");const o=3,r=Math.floor(o/2);let s=Math.max(1,e.currentPage-r);const a=Math.min(e.numPages,s+o-1);s=Math.max(1,a-o+1);for(let d=s;d<=a;d++){const h=document.createElement("button");h.dataset.action="changePage",h.dataset.numPage=d.toString(),h.type="button",h.title="Click to change the number of the current page",h.classList.add("tablelib-button"),h.innerText=d.toString(),d===e.currentPage&&h.classList.add("active"),n.appendChild(h)}const i=document.createElement("button");i.title="First Page",i.innerHTML=u.first,i.dataset.action="first";const c=document.createElement("button");c.title="Previous Page",c.innerHTML=u.prev,c.dataset.action="previous",e.currentPage<2&&(i.classList.add("disabled"),i.disabled=!0,c.classList.add("disabled"),c.disabled=!0);const l=document.createElement("button");l.title="Next Page",l.innerHTML=u.next,l.dataset.action="next";const m=document.createElement("button");return m.title="Last Page",m.innerHTML=u.last,m.dataset.action="last",e.currentPage>=e.numPages&&(l.classList.add("disabled"),l.disabled=!0,m.classList.add("disabled"),m.disabled=!0),[i,c,n,l,m].forEach(d=>{d instanceof HTMLButtonElement&&(d.setAttribute("type","button"),d.classList.add("tablelib-button")),t.appendChild(d)}),t},b={drawBody:w,drawTop:e=>{const t=document.createElement("div");t.classList.add("tablelib-top");const n=document.createElement("div");n.classList.add("tablelib-select-cont");const o=document.createElement("span");o.innerText="records per page";const r=document.createElement("select");r.classList.add("tablelib-select"),r.title="Select an option!";const s=document.createElement("button");s.type="button",s.classList.add("tablelib-button"),s.title="Click to clear all the active filters",s.innerHTML=u.clearFilters,n.appendChild(s),n.appendChild(r),n.appendChild(o),[5,10,20,50,100].forEach(c=>{const l=document.createElement("option");l.value=c.toString(),l.innerText=c.toString(),c===e&&(l.selected=!0),r.appendChild(l)});const i=document.createElement("input");return i.classList.add("tablelib-input"),i.placeholder="Search anything...",i.setAttribute("type","search"),i.name="searchbar",t.appendChild(n),t.appendChild(i),t},drawFooter:e=>{const t=e.tableContainer.querySelector(".tablelib-footer")||document.createElement("div");t.innerHTML.length>0?t.innerHTML="":t.classList.add("tablelib-footer");const n=v({numPages:e.numPages,currentPage:e.currentPage});return t.appendChild(n),t},drawHeaders:e=>{const t=e.table.querySelector("thead")||document.createElement("thead");t.innerHTML.length>0&&(t.innerHTML="");const n=document.createElement("tr");return e.columns.forEach(o=>{const r=o.field,s=document.createElement("th"),a=document.createElement("div");a.classList.add("tablelib-header");const i=document.createElement("span");if(i.innerText=o.header,r){const c=document.createElement("button");c.type="button",c.title="Sort elements",c.classList.add("tablelib-button"),c.innerHTML=u.sortDown,c.dataset.target=r,a.appendChild(c)}a.appendChild(i),s.appendChild(a),n.appendChild(s)}),t.appendChild(n),t},drawFilters:C},E=e=>{switch(e.button.dataset.action){case"first":e.currentPage=1;break;case"previous":if(e.currentPage<=1)return 1;e.currentPage-=1;break;case"next":if(e.currentPage>=e.numPages)return e.numPages;e.currentPage+=1;break;case"last":e.currentPage=e.numPages;break;case"changePage":const n=e.button.dataset.numPage;if(!n)throw new Error("The number of the page was not found");e.currentPage=parseInt(n);break;default:console.error("No action definition found for the button");break}return e.currentPage},y=e=>{const t=[...e.data],n=e.targetField,o=e.sortValue;let r="";if(t.forEach(a=>{a[n]&&(r=typeof a[n])}),r.length===0||o==="normal")return t;let s=[];switch(r){case"number":s=T({data:t,targetField:n,sortValue:o});break;case"string":s=P({data:t,targetField:n,sortValue:o});break}return console.log(t),console.log(s),s},P=({data:e,targetField:t,sortValue:n})=>[...e].sort((r,s)=>{const a=r[t],i=s[t],c=!a||typeof a=="string"&&a.trim()==="",l=!i||typeof i=="string"&&i.trim()==="";return c&&!l?1:!c&&l?-1:c&&l?0:n==="asc"?a.localeCompare(i):i.localeCompare(a)}),T=({data:e,targetField:t,sortValue:n})=>e.sort((r,s)=>{const a=r[t],i=s[t],c=a==null||isNaN(a),l=i==null||isNaN(i);return c&&!l?1:!c&&l?-1:c&&l?0:n==="asc"?a-i:i-a}),F={1:e=>(e.innerHTML=u.sortUp,"desc"),2:e=>(e.innerHTML=u.sortDown,"asc"),3:e=>(e.innerHTML=u.sortNormal,"normal")},p={paginationEvent:E,sortingEvent:e=>{const t=e.target,n=t.closest("th");if(!n||t.tagName.toLowerCase()==="select")return;const o=n.querySelector("button");if(!o)return;const r=o.dataset.target;if(!r)return;const s=F[e.numberOfClicks](o),a=e.numberOfClicks>=3?e.data:e.mutadedData;return y({data:a,targetField:r,sortValue:s})}};class M{constructor(t){this.recordsPerPage=10,this.numPages=0,this.recordsCount=0,this.currentPage=1,this.offset=0,this.limit=this.recordsPerPage,this.mutatedData=[],this.tableContainer=document.createElement("div"),this.table=document.createElement("table"),this.numberOfClicks=1,this.selectedValue="",this.config=t,this.tableContainer.classList.add("tablelib-cont"),this.table.classList.add("tablelib"),this.config.darkMode&&this.tableContainer.classList.add("dark-mode")}createTable(t){try{const n=document.createElement("div");n.classList.add("tablelib-responsive");const o=this.drawTop(),r=this.drawFilters(),s=this.drawHeaders(),a=this.drawBody(),i=this.drawFooter();this.table.appendChild(s),this.table.appendChild(a),n.appendChild(this.table),this.tableContainer.appendChild(o),this.tableContainer.appendChild(r),this.tableContainer.appendChild(n),this.tableContainer.appendChild(i),this.appendToHtml(t)}catch(n){console.error(n.message)}}redrawTable(t){t&&(this.mutatedData=t),this.currentPage=1,this.drawBody()}customEvent(t){try{if(!this.tableContainer)throw new Error("Table container not found!");const n=this.getCurrentData();this.tableContainer.addEventListener(t.eventName,o=>{o.target.closest(t.selector)&&t.event(o,n)})}catch(n){console.error(n.message)}}appendToHtml(t){if(typeof t=="string"){const n=document.querySelector(t);if(!n)throw new Error(`${t} element does not exist in the document`);n.appendChild(this.tableContainer);return}else t.appendChild(this.tableContainer)}drawTop(){const t=b.drawTop(this.recordsPerPage);return t.querySelector("select")?.addEventListener("change",({target:n})=>{const o=n;this.recordsPerPage=parseInt(o.value),this.currentPage=1,this.drawBody()}),t.querySelector("input")?.addEventListener("input",({target:n})=>{const o=n;this.currentPage=1,this.mutatedData=g({searchValue:o.value,action:"contains",data:this.config.data}),this.drawBody()}),t.querySelector("button")?.addEventListener("click",()=>{this.mutatedData=[],this.selectedValue="",this.drawBody()}),t}drawFilters(){const t=b.drawFilters({tableContainer:this.tableContainer,data:this.getCurrentData(),columns:this.config.columns,limit:this.limit,offset:this.offset,selectedValue:this.selectedValue});return t.addEventListener("change",({target:n})=>{const o=n,r=this.getCurrentData();this.mutatedData=g({searchValue:o.value,action:"equals",data:r}),this.selectedValue=o.value,this.currentPage=1,this.drawBody()}),t}drawHeaders(){let t=this.getCurrentData(),n=this.table.querySelector("thead");return n=b.drawHeaders({columns:this.config.columns,data:t,offset:this.offset,limit:this.limit,table:this.table,selectedValue:this.selectedValue}),n.querySelectorAll("th").forEach(o=>{o.addEventListener("click",({target:r})=>{if(!r)return;t=this.getCurrentData();const s=p.sortingEvent({target:r,data:this.config.data,mutadedData:t,numberOfClicks:this.numberOfClicks});s&&(this.mutatedData=s,this.drawBody(),this.numberOfClicks<3?this.numberOfClicks++:this.numberOfClicks=1)})}),n}drawBody(){const t=this.config.columns,n=this.getCurrentData();if(n.length===0)throw new Error("No data was sent");this.offset=(this.currentPage-1)*this.recordsPerPage,this.limit=Math.min(n.length,this.offset+this.recordsPerPage),this.recordsCount=n.length,this.numPages=Math.ceil(this.recordsCount/this.recordsPerPage);const o=b.drawBody({data:n,columns:t,table:this.table,offset:this.offset,limit:this.limit});return this.drawFilters(),this.drawFooter(),o}drawFooter(){const t=b.drawFooter({currentPage:this.currentPage,numPages:this.numPages,tableContainer:this.tableContainer});return t.querySelectorAll("button")?.forEach(n=>{n.addEventListener("click",({target:o})=>{const s=o.closest("button");s&&(this.currentPage=p.paginationEvent({currentPage:this.currentPage,numPages:this.numPages,button:s}),this.drawBody())})}),t}getCurrentData(){return this.mutatedData.length>=1?this.mutatedData:this.config.data}}return M}));
